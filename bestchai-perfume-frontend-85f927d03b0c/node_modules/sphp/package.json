{
  "_args": [
    [
      {
        "raw": "sphp",
        "scope": null,
        "escapedName": "sphp",
        "name": "sphp",
        "rawSpec": "",
        "spec": "latest",
        "type": "tag"
      },
      "/Users/annadeng/Documents/Courses/Grad_4/621/Project/Universal-Model-Inference/bestchai-perfume-frontend-85f927d03b0c"
    ]
  ],
  "_from": "sphp@latest",
  "_id": "sphp@0.6.2",
  "_inCache": true,
  "_location": "/sphp",
  "_nodeVersion": "6.11.2",
  "_npmOperationalInternal": {
    "host": "s3://npm-registry-packages",
    "tmp": "tmp/sphp-0.6.2.tgz_1517693558483_0.8134622219949961"
  },
  "_npmUser": {
    "name": "paragi",
    "email": "simon.riget@gmail.com"
  },
  "_npmVersion": "3.10.10",
  "_phantomChildren": {},
  "_requested": {
    "raw": "sphp",
    "scope": null,
    "escapedName": "sphp",
    "name": "sphp",
    "rawSpec": "",
    "spec": "latest",
    "type": "tag"
  },
  "_requiredBy": [
    "#USER"
  ],
  "_resolved": "https://registry.npmjs.org/sphp/-/sphp-0.6.2.tgz",
  "_shasum": "a7944b2d1f59ca434bb1ed7631d09b06a4b6ad89",
  "_shrinkwrap": null,
  "_spec": "sphp",
  "_where": "/Users/annadeng/Documents/Courses/Grad_4/621/Project/Universal-Model-Inference/bestchai-perfume-frontend-85f927d03b0c",
  "author": {
    "name": "Paragi Aps, Simon Rigét",
    "email": "simon.riget@gmail.com"
  },
  "bugs": {
    "url": "https://github.com/paragi/sphp/issues"
  },
  "dependencies": {},
  "description": "A snappy PHP execution module / middleware",
  "devDependencies": {
    "body-parser": "^1",
    "chai": "^4.1.2",
    "express": "^4",
    "express-session": "^1",
    "mocha": "^4.1.0",
    "request": "^2.69.0",
    "ws": "^3"
  },
  "directories": {
    "example": "example",
    "test": "test"
  },
  "dist": {
    "shasum": "a7944b2d1f59ca434bb1ed7631d09b06a4b6ad89",
    "tarball": "https://registry.npmjs.org/sphp/-/sphp-0.6.2.tgz"
  },
  "gitHead": "715eb8c7f93d94c718e44507fc538ec967d1c38c",
  "homepage": "https://github.com/paragi/sphp#readme",
  "keywords": [
    "snappy",
    "snap",
    "execute",
    "script",
    "cgi",
    "session",
    "websocket",
    "fast",
    "php"
  ],
  "license": "MIT",
  "main": "sphp.js",
  "maintainers": [
    {
      "name": "paragi",
      "email": "simon.riget@gmail.com"
    }
  ],
  "name": "sphp",
  "optionalDependencies": {},
  "peerDependencies": {},
  "readme": "## Snappy PHP for node js\nA snappy PHP module / middleware.\n\nFast response time is favored over use of resources and performance under load. This package is best suited embedded system and small application with few user, where you just need a fastest response time without much load.\n\nFeatures:\n* Use PHP in node with express, sessions and websockets. \n* Transfer node express session to php and reuse session ID and cookie from express\n* No dependencies (except for example)\n* Mimic Apache mod_php population of the PHP super globals\n* Highly configurable.\n* Comes with an example of a server using PHP websocket client\n\n**Note:** php-cgi must be installed. If its not in the PATH, the variable cgiEngine must be set to point to the executable binary.\n\nFile upload is disabled at present.\n\n#### Install\n\n    npm install sphp\n    \n#### Run example server\n\nMake sure php-cgi is installed and in the path. (not just php)\n\n    npm install express express-session ws body-parser\n\nChange directory to to where sphp reside (node_module/...):\n\n    cd sphp\n\nRun the example server\n\n  node example.js\n\nConnect to the exampleserver in a browser:\n\n    http://localhost:8080  or  http://<address of server>:8080       \n\nYou should now se the example pages.\n    \n\n### Set up with an express server\n\n    var express = require('express');\n    var sphp = require('sphp');\n    \n    var app = express();\n    var server = app.listen(8080);\n    \n    app.use(sphp.express('public/'));\n    app.use(express.static('public/'));\n\n\n### Set up with an express server and websockets\n\n    var express = require('express');\n    var sphp = require('sphp');\n    \n    var app = express();\n    var server = app.listen(8080);\n    var ws = new require('ws').Server({server: server});\n    \n    app.use(sphp.express('public/'));\n    ws.on('connection',sphp.websocket());\n    app.use(express.static('public/'));\n\n    \n#### Set up with an express server and express-session\n\n    var express = require('express');\n    var expressSession = require('express-session');\n    var bodyParser = require('body-parser');\n    var sessionStore = new expressSession.MemoryStore();\n    var sphp = require('sphp');\n    \n    var app = express();\n    var server = app.listen(8080);\n    var sessionOptions={\n         store: sessionStore\n        ,secret:'yes :c)'\n        ,resave:false\n        ,saveUninitialized:false\n        ,rolling: true\n        ,name: 'SID'\n    }\n\n    app.use(expressSession(sessionOptions));\n    app.use(function(request, response, next){ \n      // Save session data\n      request.session.ip=request.client.remoteAddress;\n      next();\n    });\n    app.use(bodyParser.json());      \n    app.use(bodyParser.urlencoded({extended: true}));\n\n    app.use(sphp.express('example/'));\n    ws.on('connection',sphp.websocket(sessionOptions));\n    app.use(express.static('example/'));\n\n\n### Configuration\nSPHP settings can be changed by parsing an array of options to change to the setOptions or express methods. \n\nSet all options:\n\n\tvar sphpOptions = {\n \t     cgiEngine: “/usr/bin/php-cgi'\n\t    ,docRoot: “/home/of/my/pubnlic/files”\n\t    ,minSpareWorkers: 4\n\t    ,maxWorkers: 20\n\t    ,stepDowntime: 1800\n\t    ,overwriteWSPath: “/ws_serveice.php”\n\t    , preLoadScript: “pre_load.php”\n\t    ,superglobals: {_SERVER.SERVER_NAME: “MyServer.com”}\n\t};\n    \n\tsphp.setOptions(sphpOptions);\n\nor alternatively parsed with the express middleware setup:\n\n\tapp.use(sphp.express(sphpOptions));\n\nTo set the server name:\n\n\tsphp.setOptions({superglobals: {_SERVER: {SERVER_NAME: \"MyServer.com\"}}});\n\t\nTo load the enviroment variables:\n\n    sphp.setOptions({superglobals: {_ENV: JSON.parse(JSON.stringify(process.env)}});\n\n|variable name |  |\n|---|---|\n|cgiEngine |Default: \"php-cgi\" Specify which binary file to use to execute PHP script. The executable must be in the environment PATH or use a full path to the executable file.|\n|docRoot |(default: \"./public\" Where to serve script files from. Might be relative or an absolute path. This is the variable set, when sphp.express is called with a parameter.|\n|minSpareWorkers |Default: 2. Define the minimum number of workers kept ready. <br>Note that when calling PHP scripts through websockets, an additional concurrent worker is used. |\n|maxWorkers |Default: 10. The maximum number of workers allowed to start. This number will never be exceeded. Requests will instead be rejected. Set this to limit the amount of RAM the server can use, when load is high. The footprint is about 20MB / worker as of php-cgi 5.4 php-gci. \n|stepDowntime |Default: 360 seconds. The number of worker are increased dynamically, When the need arises. This is the time it takes before, the number of workers, are reduced by one.|\n|overwriteWSPath |Default null. Used to specify which script should serve a websocket request.<br>If null, the URL of the connection GET request is used. The path is relative to docRoot.|\n|preLoadScript |Default null. This can be used to preload libraries, before a page is requested, thus improving reaponcetime. The preLoadScript variable contains a path to a php script, relative to docRoot. Be aware that the script pointet to will be executed when the php engine is loaded eg. before a client has made a page request. non of the super globals are set to usefull values at this point. The script sould contain generic library function that are use system wide, as it will be loaded with all page.|\n|superglobals | This can be used to preset PHP superglobals like $_SERVER['SERVER_NAME'] Any variable can be set, but will be overwriten, if the name is one of thouse that is set during request time, except SERVER_NAME.<br>The following variables are predefined and will be futher populated at request time:<br>    _POST<br>    _GET<br>    _FILES<br>    _SERVER: SERVER_SOFTWARE,    SERVER_NAME<br>    _COOKIE|\n\n### Notes\nThe aim of this project is to serve PHP scripts with the best response time possible. Another important functionality is integration with websocket and access to the express servers session data.\n\nThe responsetime is achieved by sacrificing considerations of resources and performance under load. This is implemented  by pre-emptively loading of the PHP-CGI engine and a user PHP script, typically including generic PHP library. The process is then put on hold until needed.\n\n### Changes\n* 0.6.2 Super global SERVER_NAME respects option setting over value generated at request time\n\t      Minor consistance corrections in the code\n      \tDocumentation update \n* 0.6.1 Fixed direct call to sphp.exec to function, before express is started.\n* 0.6.0 Adapted to windows and OSX platforms\n        Option settings changed to match recognised usual praxis for express middleware\n        Improved tests structure\n        Check validity of PHP engine and respond with clearer error messages if missing\n        Check and report PHP version in process.versions\n        Report SPHP version correct in all instances\n* 0.5.2 Fixed Websocket parse url bug\n* 0.5.1 Documentation update\n* 0.5.0 Added superglobals preset options\n        Fixed Cr/Nl in headers (compattible to express 4)\n        fixed too few spare workers started, when minSpareWorkers > default value\nsession.sid is no longer set\n* 0.4.3 Updated denendencies\n* 0.4.0 Updated to run with express v4\n* 0.4.0 Updated to run with express v4 \n        PHP output on standart-error are now send when closing.\n        stderr now gets loged to console.error. \n        Changed 'binary' transfer mode to 'UTF-8' to acommodate browser changes\n        Fixed race condition when termination with error.\n        Fixed websocket error, when not having a session id.\n        Fixed PHP_worker.php warning.\n* 0.3.15 Output to stderr is now returned last, and loged to server erro output.\n* 0.3.14 Added server session ID to session\n         conInfo.session.sid = request.sessionID;\n         php_worker uses session.sid from server session rather than cookie  \n         node version 7 compatible\n         Try harder to make sense og request record\n* 0.3.13 Websocket body can now be either a string or an object\n* 0.3.12 Documentation update\n* 0.3.11 Documentation update\n* 0.3.10 Preloading php library scripts, to improve responsetime\n* 0.3.9  Documentation update\n* 0.3.8  php_worker.php Typo\n* 0.3.7  PHP session cookie disabled.\n* 0.3.6  Websocket Error 'not opened' when script don't exists\n* 0.3.5  open_basedir restriction, without specifying doc roor in php.ini\n\n### Help\nI appreciate contributions. Code should look good and compact, and be covered by a test case or example.\nPlease don't change the formatting style laid out, without a good reason. I know its not the most common standard, but its a rather efficient one with node.\n\nDon't hesitate to submit an issue on github. But please provide a reproducible example.\n\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/paragi/sphp.git"
  },
  "runkitExampleFilename": "browser.js",
  "scripts": {
    "test": "node node_modules/mocha/bin/mocha --exit"
  },
  "version": "0.6.2"
}
